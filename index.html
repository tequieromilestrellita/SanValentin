<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<title>Te Amo</title>
<style>
body {
  margin:0;
  background: radial-gradient(circle at top, #2b0015, #05000a);
  overflow:hidden;
  font-family: Arial;
}
canvas { display:block; }

#buttons {
  position:absolute;
  top:75%;
  width:100%;
  text-align:center;
  display:none;
}

button {
  padding:15px 40px;
  margin:0 25px;
  font-size:20px;
  border:none;
  border-radius:30px;
  cursor:pointer;
}

#yes { background:#ff4d8d; color:white; }
#no { background:#444; color:white; }

/* FOOTER */
footer {
  position:fixed;
  bottom:10px;
  width:100%;
  text-align:center;
  color:rgba(255,255,255,0.6);
  font-size:14px;
  pointer-events:none;
}
</style>
</head>
<body>

<canvas id="c"></canvas>

<div id="buttons">
  <button id="yes" onclick="resp(true)">Sí</button>
  <button id="no" onclick="resp(false)">No</button>
</div>

<footer>
  Hecho con amor por Max Valdez © 2026
</footer>

<script>
const canvas = document.getElementById("c");
const ctx = canvas.getContext("2d");
canvas.width = innerWidth;
canvas.height = innerHeight;

// ---------------- PARTÍCULAS PRINCIPALES ----------------
const N = 4000;
let particles = [];
let targets = [];

for(let i=0;i<N;i++){
  particles.push({
    x:Math.random()*canvas.width,
    y:Math.random()*canvas.height,
    vx:0, vy:0,
    size:2
  });
}

// ---------------- TREN DE PARTÍCULAS ----------------
const LEN = 180;
let train = [];
for(let i=0;i<LEN;i++){
  train.push({x:canvas.width/2, y:canvas.height/2});
}

let tt = 0;

function trainPath(){
  tt += 0.05;

  let t = tt;
  let xh = 16*Math.sin(t)**3;
  let yh = 13*Math.cos(t)-5*Math.cos(2*t)-2*Math.cos(3*t)-Math.cos(4*t);

  let driftX = (tt*20) % canvas.width;
  let driftY = canvas.height/2 + Math.sin(tt/2)*200;

  return {
    x: driftX + xh*4,
    y: driftY - yh*4
  };
}

// ---------------- FORMAS PRINCIPALES ----------------
function flowerTargets(){
  targets=[];
  let petals = 10;
  for(let i=0;i<N;i++){
    let a = Math.random()*Math.PI*2;
    let r = 180*Math.sin(petals*a/2);
    targets.push({
      x:canvas.width/2+r*Math.cos(a),
      y:canvas.height/2+r*Math.sin(a)
    });
  }
}

function heartTargets(){
  targets=[];
  for(let i=0;i<N;i++){
    let t=i/N*Math.PI*2;
    let x=16*Math.sin(t)**3;
    let y=13*Math.cos(t)-5*Math.cos(2*t)-2*Math.cos(3*t)-Math.cos(4*t);
    targets.push({x:canvas.width/2+x*18, y:canvas.height/2-y*18});
  }
}

function textTargets(){
  let off=document.createElement("canvas");
  off.width=canvas.width;
  off.height=canvas.height;
  let o=off.getContext("2d");

  o.fillStyle="white";
  o.textAlign="center";
  o.textBaseline="middle";

  o.font="bold 100px Arial";
  o.fillText("TE AMO POLOLA",canvas.width/2,canvas.height/2-60);

  o.font="bold 50px Arial";
  o.fillText("¿QUIERES SER MI SAN VALENTÍN?",canvas.width/2,canvas.height/2+40);

  let img=o.getImageData(0,0,canvas.width,canvas.height).data;
  targets=[];
  for(let y=0;y<canvas.height;y+=4){
    for(let x=0;x<canvas.width;x+=4){
      let i=(y*canvas.width+x)*4;
      if(img[i]>200) targets.push({x,y});
    }
  }
  targets = targets.slice(0,N);
}

// ---------------- TIMELINE ----------------
flowerTargets();
setTimeout(heartTargets,5000);
setTimeout(textTargets,9000);
setTimeout(()=>buttons.style.display="block",13000);

// ---------------- LOOP ----------------
function draw(){
  ctx.fillStyle="rgba(5,0,10,0.25)";
  ctx.fillRect(0,0,canvas.width,canvas.height);

  for(let i=0;i<N;i++){
    let p=particles[i];
    let t=targets[i%targets.length];

    p.vx+=(t.x-p.x)*0.01;
    p.vy+=(t.y-p.y)*0.01;
    p.vx*=0.9; p.vy*=0.9;
    p.x+=p.vx; p.y+=p.vy;

    ctx.fillStyle="rgba(255,120,180,0.9)";
    ctx.beginPath();
    ctx.arc(p.x,p.y,p.size,0,Math.PI*2);
    ctx.fill();
  }

  let head = trainPath();
  train.unshift(head);
  train.pop();

  for(let i=0;i<train.length;i++){
    let p=train[i];
    let alpha = 1 - i/train.length;
    ctx.fillStyle=`rgba(255,200,220,${alpha})`;

    for(let a=0;a<Math.PI*2;a+=0.8){
      let x=16*Math.sin(a)**3;
      let y=13*Math.cos(a)-5*Math.cos(2*a)-2*Math.cos(3*a)-Math.cos(4*a);
      ctx.beginPath();
      ctx.arc(p.x+x*0.15, p.y-y*0.15, 1.2, 0, Math.PI*2);
      ctx.fill();
    }
  }

  requestAnimationFrame(draw);
}
draw();

// ---------------- RESPUESTA ----------------
function resp(ok){
  if(ok){
    document.body.innerHTML =
      "<h1 style='color:white;text-align:center;margin-top:40vh'>Te amo polola. Mi primer san valentin con alguien que se hace o que jejej lololololololo</h1>";
  } else {
    alert("lol polola. Este botón ni jala ");
  }
}
</script>
</body>
</html>
